<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>formation-vscode-conda</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="formation-vscode-conda_files/libs/clipboard/clipboard.min.js"></script>
<script src="formation-vscode-conda_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="formation-vscode-conda_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="formation-vscode-conda_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="formation-vscode-conda_files/libs/quarto-html/popper.min.js"></script>
<script src="formation-vscode-conda_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="formation-vscode-conda_files/libs/quarto-html/anchor.min.js"></script>
<link href="formation-vscode-conda_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="formation-vscode-conda_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="formation-vscode-conda_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="formation-vscode-conda_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="formation-vscode-conda_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="environnements-python-avec-conda-installation-utilisation-et-int√©gration-dans-vscode" class="level1">
<h1>Environnements Python avec Conda : installation, utilisation et int√©gration dans VSCode</h1>
<section id="thierry-laurent-st-pierre" class="level4">
<h4 class="anchored" data-anchor-id="thierry-laurent-st-pierre">Thierry Laurent St-Pierre</h4>
</section>
<section id="octobre-2025" class="level4">
<h4 class="anchored" data-anchor-id="octobre-2025">Octobre 2025</h4>
<p><strong>D√©p√¥t GitHub</strong> : <a href="https://github.com/tofunori/numerilab-vscode-conda" class="uri">https://github.com/tofunori/numerilab-vscode-conda</a></p>
<hr>
</section>
<section id="table-des-mati√®res" class="level2">
<h2 class="anchored" data-anchor-id="table-des-mati√®res">Table des mati√®res</h2>
<ul>
<li><a href="#1-introduction">1. Introduction</a></li>
<li><a href="#2-conda---gestion-des-environnements">2. Conda - Gestion des environnements</a>
<ul>
<li><a href="#21-th√©orie-et-contexte">2.1 Th√©orie et contexte</a></li>
<li><a href="#22-installation-guid√©e">2.2 Installation guid√©e</a></li>
<li><a href="#23-cr√©ation-denvironnements">2.3 Cr√©ation d‚Äôenvironnements</a></li>
<li><a href="#24-librairies-g√©ospatiales-essentielles">2.4 Librairies g√©ospatiales essentielles</a></li>
</ul></li>
<li><a href="#3-vscode---√©diteur-pour-g√©omatique">3. VSCode - √âditeur pour g√©omatique</a>
<ul>
<li><a href="#31-prise-en-main-de-linterface">3.1 Prise en main de l‚Äôinterface</a></li>
<li><a href="#32-extensions-essentielles">3.2 Extensions essentielles</a></li>
<li><a href="#33-terminal-int√©gr√©-et-conda">3.3 Terminal int√©gr√© et Conda</a></li>
<li><a href="#34-git-et-github">3.4 Git et GitHub</a></li>
<li><a href="#35-d√©marche-compl√®te">3.5 D√©marche compl√®te</a></li>
</ul></li>
<li><a href="#4-ressources-et-annexes">4. Ressources et annexes</a></li>
</ul>
<hr>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">1. Introduction</h2>
<section id="contexte" class="level3">
<h3 class="anchored" data-anchor-id="contexte">Contexte</h3>
<p>Vous travaillez en <strong>g√©omatique</strong> et avez besoin de : - Installer des librairies complexes (GDAL, GeoPandas, Rasterio) - Maintenir plusieurs projets avec des d√©pendances diff√©rentes - Collaborer efficacement avec d‚Äôautres chercheurs - Documenter et reproduire vos analyses</p>
<p><strong>Conda</strong> et <strong>VSCode</strong> sont deux outils compl√©mentaires qui r√©pondent √† ces besoins.</p>
</section>
<section id="pourquoi-conda" class="level3">
<h3 class="anchored" data-anchor-id="pourquoi-conda">Pourquoi Conda ?</h3>
<p><strong>Python natif</strong> est livr√© sans gestion d‚Äôenvironnements qui sont fiable. Les librairies sp√©cialis√©es (GDAL, Proj) requi√®rent une compilation correcte des d√©pendances.</p>
<p><strong>Conda</strong> : - Isole les environnements par projet - G√®re les d√©pendances C (GDAL, PROJ) - Rend vos projets <strong>reproductibles</strong> - Fonctionne sur Windows, macOS, Linux</p>
</section>
<section id="pourquoi-vscode" class="level3">
<h3 class="anchored" data-anchor-id="pourquoi-vscode">Pourquoi VSCode ?</h3>
<p><strong>VSCode</strong> : - L√©ger et gratuit - Extensions puissantes pour g√©omatique - Terminal int√©gr√© d√©tecte Conda automatiquement - Git int√©gr√© pour collaboration - Support Jupyter Notebooks natif</p>
<hr>
</section>
</section>
<section id="conda---gestion-des-environnements" class="level2">
<h2 class="anchored" data-anchor-id="conda---gestion-des-environnements">2. Conda - Gestion des environnements</h2>
<section id="th√©orie-et-contexte" class="level3">
<h3 class="anchored" data-anchor-id="th√©orie-et-contexte">2.1 Th√©orie et contexte</h3>
<section id="le-probl√®me-que-conda-r√©sout" class="level4">
<h4 class="anchored" data-anchor-id="le-probl√®me-que-conda-r√©sout">Le probl√®me que Conda r√©sout</h4>
<p>Vous avez probablement rencontr√© cette situation frustante : vous installez <code>pip install gdal</code> pour un projet de g√©omatique, et vous recevez une erreur du type :</p>
<pre><code>ERROR: Could not find a version that satisfies the requirement GDAL
ERROR: Could not build wheels for GDAL</code></pre>
<p>Ou pire, l‚Äôinstallation r√©ussit, mais GDAL ne trouve pas la biblioth√®que <code>PROJ</code> au moment de l‚Äôex√©cution. Pourquoi ? Parce que <strong>GDAL n‚Äôest pas qu‚Äôune librairie Python</strong>. C‚Äôest une collection de outils g√©ospatiaux √©crits en C/C++ (GDAL, GEOS, PROJ, TIFF, etc.) qui ont besoin d‚Äô√™tre compil√©es correctement et de fonctionner ensemble.</p>
<p><strong>Python seul (avec pip) ne peut pas g√©rer ces d√©pendances C.</strong> C‚Äôest le r√¥le de <strong>Conda</strong>.</p>
<p><strong>Note technique</strong> : pip peut installer facilement certaines biblioth√®ques (PyTorch, seaborn) car elles fournissent des <strong>wheels</strong> (<code>.whl</code>) ‚Äî des librairies Python pr√©-compil√©es sur PyPI. GDAL et Rasterio ne fournissent PAS de wheels pour Windows, for√ßant pip √† compiler depuis le code source, ce qui √©choue fr√©quemment.</p>
</section>
<section id="quest-ce-que-conda" class="level4">
<h4 class="anchored" data-anchor-id="quest-ce-que-conda">Qu‚Äôest-ce que Conda ?</h4>
<p>Conda est un <strong>gestionnaire de paquets et d‚Äôenvironnements</strong> qui : - T√©l√©charge des <strong>versions pr√©-compil√©es</strong> de GDAL, PROJ, et autres (au lieu de compiler localement) - Garantit que <strong>toutes les d√©pendances C sont compatibles</strong> entre elles - Permet de cr√©er des <strong>environnements isol√©s</strong> pour chaque projet</p>
</section>
<section id="anaconda-vs-miniforge-quel-choisir" class="level4">
<h4 class="anchored" data-anchor-id="anaconda-vs-miniforge-quel-choisir">Anaconda vs Miniforge : Quel choisir ?</h4>
<p>Avant de choisir votre gestionnaire, il faut comprendre qu‚ÄôAnaconda et Miniforge sont deux <strong>distributions</strong> de Conda (il en existe d‚Äôautres : Miniconda, Mambaforge, etc.).</p>
<p><strong>Anaconda</strong> est la distribution ‚Äúcompl√®te‚Äù : elle installe ~250 librairies pr√©-compil√©es (NumPy, Pandas, Matplotlib, etc.) d‚Äôembl√©e. C‚Äôest comme recevoir un couteau suisse avec 40 outils alors que vous n‚Äôen utiliserez que 3.</p>
<p><strong>Miniforge</strong> est la distribution ‚Äúminimale‚Äù : elle installe seulement Conda et laisse vous installer ce dont vous avez besoin. Plus l√©ger, plus rapide, et plus flexible.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 34%">
<col style="width: 37%">
</colgroup>
<thead>
<tr class="header">
<th>Aspect</th>
<th>Anaconda</th>
<th>Miniforge</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Taille installation</strong></td>
<td>~3 GB</td>
<td>~150 MB</td>
</tr>
<tr class="even">
<td><strong>Librairies pr√©-install√©es</strong></td>
<td>~250 (NumPy, Pandas, etc.)</td>
<td>Aucune</td>
</tr>
<tr class="odd">
<td><strong>Temps installation</strong></td>
<td>~10-15 minutes</td>
<td>~2-3 minutes</td>
</tr>
<tr class="even">
<td><strong>License</strong></td>
<td>Commerciale (payante pour pro)</td>
<td>Open Source (100% libre)</td>
</tr>
<tr class="odd">
<td><strong>Canal par d√©faut</strong></td>
<td><code>defaults</code> (Anaconda Inc.)</td>
<td><code>conda-forge</code> (communautaire)</td>
</tr>
<tr class="even">
<td><strong>Id√©al pour</strong></td>
<td>D√©butants absolus</td>
<td>Projets professionnels/g√©omatique</td>
</tr>
</tbody>
</table>
<p><strong>Ma recommandation pour ce cours</strong> : <strong>Miniforge avec le canal <code>conda-forge</code></strong></p>
<p>Pourquoi ? Parce que pour la g√©omatique et l‚Äôanalyse de donn√©es spatiales, vous avez besoin de versions r√©centes et stables de GDAL, PROJ, et GeoPandas. Miniforge + conda-forge garantit des mises √† jour r√©guli√®res et une meilleure compatibilit√© avec l‚Äô√©cosyst√®me g√©ospatial.</p>
</section>
<section id="le-r√¥le-crucial-de-conda-forge" class="level4">
<h4 class="anchored" data-anchor-id="le-r√¥le-crucial-de-conda-forge">Le r√¥le crucial de <code>conda-forge</code></h4>
<p>Conda utilise des <strong>canaux</strong> (channels) pour t√©l√©charger les librairies. Pensez √† un canal comme une source/d√©p√¥t de librairies.</p>
<p><strong>Canal <code>defaults</code></strong> (fourni par Anaconda Inc.) - Librairies maintenues par l‚Äô√©quipe Anaconda - Mise √† jour lente (focus s√©curit√©) - Probl√®me : GDAL et g√©ospatial souvent obsol√®tes</p>
<p><strong>Canal <code>conda-forge</code></strong> (maintenu par la communaut√©) - ~20,000 librairies maintenues par des scientifiques et d√©veloppeurs - Mise √† jour rapide (nouvelles versions de GDAL disponibles rapidement) - Id√©al pour g√©omatique et science des donn√©es - 100% gratuit et transparent (toutes les versions disponible sur GitHub)</p>
<p><strong>Exemple concret</strong> :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec Miniforge (conda-forge est d√©j√† le canal par d√©faut) :</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install gdal                    <span class="co"># [OK] Fonctionne (utilise conda-forge)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge gdal     <span class="co"># [OK] Fonctionne aussi (explicite)</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Avec Anaconda (canal defaults par d√©faut) :</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install gdal                    <span class="co"># [!] Version obsol√®te du canal defaults</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge gdal     <span class="co"># [OK] Version √† jour de conda-forge</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="alternatives-√†-conda-quand-les-utiliser" class="level4">
<h4 class="anchored" data-anchor-id="alternatives-√†-conda-quand-les-utiliser">Alternatives √† Conda : Quand les utiliser ?</h4>
<p>Vous avez d‚Äôautres outils pour g√©rer les librairies Python. Voici comment les utiliser :</p>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 26%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Outil</th>
<th>Utilit√©</th>
<th>Quand l‚Äôutiliser</th>
<th>Limitation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Conda</strong></td>
<td>Gestion compl√®te (Python + d√©pendances C)</td>
<td><strong>Toujours pour g√©omatique</strong></td>
<td>-</td>
</tr>
<tr class="even">
<td><strong>Pip</strong></td>
<td>Installer librairies Python uniquement</td>
<td>Librairies simples (seaborn, pandas)</td>
<td>Ne compile pas d√©pendances C</td>
</tr>
<tr class="odd">
<td><strong>Mamba</strong></td>
<td>Rempla√ßant ultra-rapide de Conda</td>
<td>Conda trop lent ? Installez mamba</td>
<td>Encore jeune (moins stable)</td>
</tr>
<tr class="even">
<td><strong>uv</strong></td>
<td>Alternative moderne √† pip</td>
<td>Projets Python pur (sans d√©pendances C)</td>
<td>R√©cent, communaut√© petite</td>
</tr>
<tr class="odd">
<td><strong>VENV</strong></td>
<td>Environnements Python seulement</td>
<td>Jamais pour g√©omatique</td>
<td>Pas de d√©pendances C</td>
</tr>
</tbody>
</table>
<p><strong>Notre choix pour ce cours</strong> : Conda (avec possibilit√© d‚Äôupgrader vers Mamba plus tard si n√©cessaire).</p>
</section>
<section id="pourquoi-isoler-les-environnements" class="level4">
<h4 class="anchored" data-anchor-id="pourquoi-isoler-les-environnements">Pourquoi isoler les environnements ?</h4>
<p>Vous avez plusieurs projets de recherche sur lesquels vous travaillez ? Chacun a probablement besoin de versions diff√©rentes des m√™mes librairies.</p>
<p><strong>Sc√©nario r√©aliste</strong> : - <strong>Projet A</strong> : Cartographie de zones prot√©g√©es (GeoPandas 0.12, GDAL 3.6) - <strong>Projet B</strong> : Classification d‚Äôimages satellites avec Random Forest (GeoPandas 0.14, GDAL 3.8, scikit-learn, rasterio)</p>
<p>Na√Øvement, vous pourriez installer toutes les librairies globalement. Mais quand vous installez GeoPandas 0.14 pour le Projet B, cela casse les d√©pendances du Projet A (qui attend 0.12).</p>
<p><strong>Avec Conda</strong>, chaque projet a son propre ‚Äúenvironnement virtuel‚Äù avec ses propres versions :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Passer du Projet A au Projet B</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate projet-a        <span class="co"># Vous utilisez GeoPandas 0.12</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ... travail sur Projet A ...</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate projet-b        <span class="co"># Vous utilisez GeoPandas 0.14</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ... travail sur Projet B ...</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> deactivate              <span class="co"># Revenir √† l'environnement base</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Avantage</strong> : Z√©ro conflit, z√©ro casse-t√™te. Chaque projet vit dans son propre ‚Äúappartement virtuel‚Äù.</p>
<hr>
</section>
</section>
<section id="installation-guid√©e" class="level3">
<h3 class="anchored" data-anchor-id="installation-guid√©e">2.2 Installation guid√©e</h3>
<section id="√©tape-1-t√©l√©charger-miniforge" class="level4">
<h4 class="anchored" data-anchor-id="√©tape-1-t√©l√©charger-miniforge">√âtape 1 : T√©l√©charger Miniforge</h4>
<ol type="1">
<li>Visiter <a href="https://github.com/conda-forge/miniforge">github.com/conda-forge/miniforge</a></li>
<li>T√©l√©charger l‚Äôinstalleur Windows : <code>Miniforge3-Windows-x86_64.exe</code></li>
</ol>
</section>
<section id="√©tape-2-installer" class="level4">
<h4 class="anchored" data-anchor-id="√©tape-2-installer">√âtape 2 : Installer</h4>
<ul>
<li>Double-cliquer l‚Äôex√©cutable</li>
<li>Accepter la license</li>
<li>Laisser chemin par d√©faut (ex: <code>C:\Users\YourName\miniforge3</code>)</li>
<li><strong>IMPORTANT</strong> : Cocher ‚ÄúRegister Miniforge3 as my default Python‚Äù</li>
</ul>
<p><img src="images/miniforge-install-options.png" class="img-fluid" alt="Options d‚Äôinstallation Miniforge3"> <em>Figure 1 : Options d‚Äôinstallation - Cochez ‚ÄúRegister Miniforge3 as the system Python 3.12‚Äù pour permettre √† VSCode et autres programmes de d√©tecter automatiquement Miniforge</em></p>
<p><strong>macOS/Linux :</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> Miniforge3-MacOSX-x86_64.sh</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Suivre les prompts</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/miniforge3/bin/activate</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="√©tape-3-v√©rifier-linstallation" class="level4">
<h4 class="anchored" data-anchor-id="√©tape-3-v√©rifier-linstallation">√âtape 3 : V√©rifier l‚Äôinstallation</h4>
<p>Ouvrir <strong>Command Prompt</strong> (Windows) ou <strong>Terminal</strong> (macOS/Linux) et taper :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> <span class="at">--version</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>R√©sultat attendu :</p>
<pre><code>conda 24.x.x</code></pre>
</section>
<section id="√©tape-4-initialiser-conda" class="level4">
<h4 class="anchored" data-anchor-id="√©tape-4-initialiser-conda">√âtape 4 : Initialiser Conda</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> init</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Cela cr√©e un fichier de configuration qui active l‚Äôenvironnement de base au d√©marrage.</p>
<hr>
</section>
</section>
<section id="cr√©ation-denvironnements" class="level3">
<h3 class="anchored" data-anchor-id="cr√©ation-denvironnements">2.3 Cr√©ation d‚Äôenvironnements</h3>
<section id="cr√©er-un-nouvel-environnement" class="level4">
<h4 class="anchored" data-anchor-id="cr√©er-un-nouvel-environnement">Cr√©er un nouvel environnement</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">-n</span> geo-env python=3.11</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Explication</strong> : - <code>conda create</code> : cr√©er un environnement - <code>-n geo-env</code> : nom de l‚Äôenvironnement - <code>python=3.11</code> : version Python sp√©cifi√©e</p>
</section>
<section id="activer-lenvironnement" class="level4">
<h4 class="anchored" data-anchor-id="activer-lenvironnement">Activer l‚Äôenvironnement</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Windows</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate geo-env</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># macOS/Linux</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> activate geo-env</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Vous verrez <code>(geo-env)</code> au d√©but de votre invite de commande.</p>
</section>
<section id="d√©sactiver-lenvironnement" class="level4">
<h4 class="anchored" data-anchor-id="d√©sactiver-lenvironnement">D√©sactiver l‚Äôenvironnement</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> deactivate</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Vous reveniez √† l‚Äôenvironnement <code>(base)</code>.</p>
</section>
<section id="lister-vos-environnements" class="level4">
<h4 class="anchored" data-anchor-id="lister-vos-environnements">Lister vos environnements</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env list</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>R√©sultat :</p>
<pre><code># conda environments:
#
base                  *  C:\Users\YourName\miniforge3
geo-env                  C:\Users\YourName\miniforge3\envs\geo-env</code></pre>
<p><img src="images/conda-commands.gif" class="img-fluid" alt="D√©monstration des commandes conda essentielles"> <em>Figure 2 : D√©monstration des commandes conda - Installation des librairies avec mamba, inspection avec conda list, et activation d‚Äôenvironnement. L‚Äôast√©risque (*) indique l‚Äôenvironnement actif.</em></p>
<hr>
</section>
</section>
<section id="librairies-g√©ospatiales-essentielles" class="level3">
<h3 class="anchored" data-anchor-id="librairies-g√©ospatiales-essentielles">2.4 Librairies g√©ospatiales essentielles</h3>
<section id="pourquoi-certaines-librairies-plut√¥t-que-dautres" class="level4">
<h4 class="anchored" data-anchor-id="pourquoi-certaines-librairies-plut√¥t-que-dautres">Pourquoi certaines librairies plut√¥t que d‚Äôautres ?</h4>
<p>Maintenant que vous avez un environnement Conda isol√©, vous devez l‚Äô√©quiper des outils appropri√©s pour la g√©omatique. Mais quelles librairies choisir parmi les ~20,000 disponibles sur conda-forge ?</p>
<p>La r√©ponse d√©pend de vos besoins selon le projet. En g√©omatique, vous travaillez g√©n√©ralement avec deux types de donn√©es :</p>
<p><strong>Donn√©es vectorielles</strong> (points, lignes, polygones) - Exemple : limites administratives, routes, b√¢timents - Librairie cl√© : <strong>GeoPandas</strong></p>
<p><strong>Donn√©es raster</strong> (grilles de pixels, images satellites) - Exemple : images Sentinel-2, mod√®les d‚Äô√©l√©vation, cartes climatiques - Librairies cl√©s : <strong>GDAL</strong>, <strong>Rasterio</strong></p>
<p>Pour les visualiser et explorer vos r√©sultats, vous avez aussi besoin de librairies de data science g√©n√©rale (NumPy, Pandas, Matplotlib) et d‚Äôoutils interactifs (Jupyter, Folium).</p>
</section>
<section id="installation-des-librairies-g√©ospatiales-compl√®tes" class="level4">
<h4 class="anchored" data-anchor-id="installation-des-librairies-g√©ospatiales-compl√®tes">Installation des librairies g√©ospatiales compl√®tes</h4>
<p>Activez votre environnement et installez toutes les librairies d‚Äôun seul coup :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate geo-env</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge <span class="dt">\</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  geopandas <span class="dt">\</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  gdal <span class="dt">\</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  rasterio <span class="dt">\</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  folium <span class="dt">\</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  jupyter <span class="dt">\</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  jupyterlab <span class="dt">\</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  matplotlib <span class="dt">\</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  numpy <span class="dt">\</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  pandas <span class="dt">\</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  scipy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Note importante</strong> : Si vous utilisez <strong>Miniforge</strong> (recommand√© dans ce cours), le <code>-c conda-forge</code> est <strong>optionnel</strong> car conda-forge est d√©j√† le canal par d√©faut. Vous pouvez donc √©crire simplement <code>conda install geopandas gdal rasterio ...</code>.</p>
<p><strong>Note performance</strong> : <code>conda</code> prendra ~2-5 minutes pour r√©soudre les d√©pendances et compiler. C‚Äôest normal (voir 2.1 pour comprendre pourquoi). Utilisez <code>mamba</code> si vous √™tes impatient comme moi üòÖ :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternative ultra-rapide (10x plus rapide)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mamba</span> install geopandas gdal rasterio folium jupyter jupyterlab matplotlib numpy pandas scipy</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="librairies-cl√©s-expliqu√©es-en-d√©tail" class="level4">
<h4 class="anchored" data-anchor-id="librairies-cl√©s-expliqu√©es-en-d√©tail">Librairies cl√©s expliqu√©es en d√©tail</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Librairie</th>
<th>Cat√©gorie</th>
<th>Utilit√©</th>
<th>Exemple d‚Äôusage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>GeoPandas</strong></td>
<td>Donn√©es spatiales</td>
<td>DataFrames avec g√©om√©tries spatiales (points, lignes, polygones). Interface Python pour donn√©es vectorielles.</td>
<td>Charger une shapefile de zones prot√©g√©es, calculer surfaces, fusionner polygones</td>
</tr>
<tr class="even">
<td><strong>GDAL/OGR</strong></td>
<td>Drivers g√©ospatials</td>
<td>Lecture/√©criture de formats raster et vecteur. Transformations de projections. Sous-jacent √† GeoPandas et Rasterio.</td>
<td>Convertir GeoTIFF en NetCDF, reprojeter en WGS84</td>
</tr>
<tr class="odd">
<td><strong>Rasterio</strong></td>
<td>Donn√©es raster</td>
<td>Interface moderne et pythonique pour manipuler donn√©es raster. Plus simple que GDAL direct.</td>
<td>Lire bandes d‚Äôune image satellite Sentinel-2, calculer NDVI</td>
</tr>
<tr class="even">
<td><strong>Folium</strong></td>
<td>Cartographie web</td>
<td>Cr√©er des cartes interactives Leaflet (OpenStreetMap). Parfait pour explorer donn√©es sur le web.</td>
<td>Afficher couches vectorielles sur carte zoomable, cr√©er heatmaps</td>
</tr>
<tr class="odd">
<td><strong>NumPy</strong></td>
<td>Calcul num√©rique</td>
<td>Op√©rations vectoris√©es sur tableaux. Base de presque tous les calculs g√©ospatiaux.</td>
<td>Calculer statistiques raster, alg√®bre cartographique</td>
</tr>
<tr class="even">
<td><strong>Pandas</strong></td>
<td>Data science</td>
<td>DataFrames pour donn√©es tabulaires. Indispensable pour analyses statistiques.</td>
<td>Nettoyer attributs vectoriels, grouper par r√©gion</td>
</tr>
<tr class="odd">
<td><strong>Matplotlib</strong></td>
<td>Visualisation</td>
<td>Graphiques 2D statiques. Parfait pour publications scientifiques.</td>
<td>Tracer histogrammes NDVI, graphes en barres d‚Äôanalyse</td>
</tr>
<tr class="even">
<td><strong>Jupyter</strong></td>
<td>Notebooks interactifs</td>
<td>Environnement interactif pour explorer donn√©es et documenter analyses. Mix code, texte, graphiques.</td>
<td>Cahier d‚Äôanalyse Sentinel-2 partageables</td>
</tr>
<tr class="odd">
<td><strong>SciPy</strong></td>
<td>Calcul scientifique</td>
<td>Algorithmes num√©riques avanc√©s (optimisation, statistiques, filtrage).</td>
<td>Appliquer filtres spatiaux, analyses statistiques g√©ospatialis√©es</td>
</tr>
</tbody>
</table>
</section>
<section id="v√©rifier-linstallation" class="level4">
<h4 class="anchored" data-anchor-id="v√©rifier-linstallation">V√©rifier l‚Äôinstallation</h4>
<p>Apr√®s l‚Äôinstallation, testez que toutes les librairies sont accessibles :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-c</span> <span class="st">"import geopandas; print(f'GeoPandas {geopandas.__version__}')"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-c</span> <span class="st">"import rasterio; print(f'Rasterio {rasterio.__version__}')"</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> <span class="at">-c</span> <span class="st">"import gdal; print(f'GDAL {gdal.__version__}')"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Vous devriez voir des num√©ros de version (ex: <code>GeoPandas 0.14.0</code>). Si vous recevez <code>ModuleNotFoundError</code>, relancez le terminal ou v√©rifiez que vous avez bien activ√© <code>geo-env</code>.</p>
<p><strong>Validation compl√®te</strong> : Pour tester votre environnement, consultez le notebook <a href="../exemples/01a-validation-rapide.ipynb">01a-validation-rapide.ipynb</a> (section 3.3 pour l‚Äôex√©cution).</p>
</section>
<section id="environnements-reproductibles-avec-environment.yml" class="level4">
<h4 class="anchored" data-anchor-id="environnements-reproductibles-avec-environment.yml">Environnements reproductibles avec environment.yml</h4>
<p><strong>Le probl√®me</strong> : Vous finissez votre projet en mai 2025 avec GDAL 3.8.0. Votre coll√®gue clone votre code en d√©cembre 2025, installe les librairies en novembre 2025 (versions plus r√©centes), et soudain votre code ne fonctionne plus. Conflit de versions!</p>
<p><strong>La solution</strong> : Exportez votre environnement exact dans un fichier <code>environment.yml</code> qui ‚Äúg√®le‚Äù les versions :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env export <span class="op">&gt;</span> environment.yml</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<blockquote class="blockquote">
<p><strong>Note importante</strong> : Le fichier <code>environment.yml</code> sera cr√©√© dans le r√©pertoire courant de votre terminal. Assurez-vous d‚Äô√™tre √† la racine de votre projet avant d‚Äôex√©cuter cette commande. V√©rifiez votre emplacement avec <code>pwd</code> (PowerShell) ou <code>cd</code> (Windows).</p>
</blockquote>
<p>Contenu du fichier g√©n√©r√© :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> geo-env</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">channels</span><span class="kw">:</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> conda-forge</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> defaults</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dependencies</span><span class="kw">:</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> python=3.11</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> geopandas=0.14.0</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> gdal=3.8.0</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> rasterio=1.3.0</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> folium=0.14.0</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> jupyter=1.0.0</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> jupyterlab=4.0.0</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> matplotlib=3.8.0</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> numpy=1.24.0</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> pandas=2.1.0</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> scipy=1.11.0</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> pip</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> ca-certificates</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> certifi</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> ... (autres d√©pendances C et de base)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Ce fichier agit comme une ‚Äúrecette‚Äù : n‚Äôimporte qui peut recr√©er EXACTEMENT votre environnement :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quelqu'un d'autre peut faire :</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env create <span class="at">-f</span> environment.yml</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Et il aura EXACTEMENT:</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Python 3.11</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># - GeoPandas 0.14.0</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># - GDAL 3.8.0</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># - etc.</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Important</strong> : Committez ce fichier <code>environment.yml</code> dans votre repo Github (nous verrons √ßa en section 3.4). C‚Äôest l‚Äôune des meilleures pratiques de reproductibilit√© en science.</p>
</section>
<section id="bonus-cr√©er-environnement-avec-versions-sp√©cifiques" class="level4">
<h4 class="anchored" data-anchor-id="bonus-cr√©er-environnement-avec-versions-sp√©cifiques">Bonus : Cr√©er environnement avec versions sp√©cifiques</h4>
<p>Si vous avez besoin d‚Äôune version particuli√®re de GDAL (pour compatibilit√©), vous pouvez √™tre explicite d√®s la cr√©ation :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cr√©er environnement avec versions sp√©cifi√©es</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">-n</span> geo-env <span class="dt">\</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  python=3.11 <span class="dt">\</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  geopandas=0.14.0 <span class="dt">\</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  gdal=3.8.0 <span class="dt">\</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  rasterio=1.3.0 <span class="dt">\</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">-c</span> conda-forge</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Cela acc√©l√®re l‚Äôinstallation car conda conna√Æt d√©j√† les versions recherch√©es.</p>
<hr>
</section>
</section>
<section id="commandes-essentielles-pour-le-quotidien" class="level3">
<h3 class="anchored" data-anchor-id="commandes-essentielles-pour-le-quotidien">2.5 Commandes essentielles pour le quotidien</h3>
<section id="inspecter-vos-environnements" class="level4">
<h4 class="anchored" data-anchor-id="inspecter-vos-environnements">Inspecter vos environnements</h4>
<p>Ces commandes vous permettent de savoir <strong>o√π vous √™tes</strong> et <strong>ce que vous avez</strong> install√© :</p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 27%">
<col style="width: 44%">
</colgroup>
<thead>
<tr class="header">
<th>Commande</th>
<th>R√©sultat</th>
<th>Quand l‚Äôutiliser</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>conda env list</code></td>
<td>Liste tous vos environnements</td>
<td>Voir quels projets existent</td>
</tr>
<tr class="even">
<td><code>conda list</code></td>
<td>Librairies dans l‚Äôenvironnement actif</td>
<td>V√©rifier versions install√©es</td>
</tr>
<tr class="odd">
<td><code>conda list gdal</code></td>
<td>Info sur une librairie sp√©cifique</td>
<td>V√©rifier si GDAL est install√© et sa version</td>
</tr>
</tbody>
</table>
<p><strong>Exemple pratique</strong> :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># V√©rifier quel environnement est actif</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env list</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚Üí Celui avec * est actif</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Lister toutes les librairies install√©es</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> list</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Chercher une librairie sp√©cifique</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> list gdal</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ‚Üí gdal  3.8.0  py311h1234567_0  conda-forge</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="nettoyer-lespace-disque" class="level4">
<h4 class="anchored" data-anchor-id="nettoyer-lespace-disque">Nettoyer l‚Äôespace disque</h4>
<p><strong>Probl√®me courant</strong> : Le cache Conda grandit rapidement (+ 5 GB apr√®s quelques mois d‚Äôutilisation). Les environnements de test s‚Äôaccumulent et remplissent votre disque.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 26%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Commande</th>
<th>Effet</th>
<th>Quand l‚Äôutiliser</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>conda clean --all --dry-run</code></td>
<td>Voir ce qui sera supprim√© (sans supprimer)</td>
<td>Avant de nettoyer</td>
</tr>
<tr class="even">
<td><code>conda clean --all</code></td>
<td>Supprimer cache et librairies inutilis√©es</td>
<td>Une fois par mois</td>
</tr>
<tr class="odd">
<td><code>conda remove -n old-env --all</code></td>
<td>Supprimer compl√®tement un environnement</td>
<td>Projet termin√©</td>
</tr>
</tbody>
</table>
<p><strong>Exemple pratique</strong> :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Voir combien d'espace vous pouvez r√©cup√©rer</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> clean <span class="at">--all</span> <span class="at">--dry-run</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># R√©sultat typique :</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Will remove 47 tarball(s), 8.5 GB</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Will remove 12 librairie(s), 2.1 GB</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Si &gt; 5 GB, nettoyer :</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> clean <span class="at">--all</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Supprimer un vieil environnement de test</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> remove <span class="at">-n</span> test-env <span class="at">--all</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="exporter-pour-reproductibilit√©" class="level4">
<h4 class="anchored" data-anchor-id="exporter-pour-reproductibilit√©">Exporter pour reproductibilit√©</h4>
<p><strong>R√®gle d‚Äôor</strong> : Toujours exporter <code>environment.yml</code> avant de committer sur Git.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Commande</th>
<th>R√©sultat</th>
<th>Avantage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>conda env export &gt; environment.yml</code></td>
<td>Fichier avec <strong>toutes</strong> les d√©pendances (100+ lignes)</td>
<td>Reproductibilit√© exacte</td>
</tr>
<tr class="even">
<td><code>conda env export --from-history &gt; environment.yml</code></td>
<td>Fichier avec seulement librairies <strong>explicitement install√©es</strong> (10-15 lignes)</td>
<td>Lisible et maintenable</td>
</tr>
</tbody>
</table>
<p><strong>Recommandation</strong> : Utilisez <code>--from-history</code> pour un fichier propre et lisible.</p>
<p><strong>Exemple pratique</strong> :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Activer votre environnement</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate geo-env</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Exporter (version lisible recommand√©e)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env export <span class="at">--from-history</span> <span class="op">&gt;</span> environment.yml</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># R√©sultat : fichier concis</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="co"># name: geo-env</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># channels:</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   - conda-forge</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co"># dependencies:</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   - python=3.11</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   - geopandas</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   - gdal</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   - rasterio</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   - jupyter</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Committer ce fichier sur Git</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add environment.yml</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Ajouter environment.yml pour reproductibilit√©"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
<section id="erreurs-courantes-√†-√©viter" class="level4">
<h4 class="anchored" data-anchor-id="erreurs-courantes-√†-√©viter">Erreurs courantes √† √©viter</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 54%">
<col style="width: 45%">
</colgroup>
<thead>
<tr class="header">
<th>Mauvaise pratique</th>
<th>Bonne pratique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>conda install geopandas</code> dans <code>(base)</code></td>
<td>Cr√©er un nouvel environnement d√©di√©</td>
</tr>
<tr class="even">
<td>Supprimer le dossier <code>miniforge3/</code> manuellement</td>
<td>Utiliser <code>conda remove -n env --all</code></td>
</tr>
<tr class="odd">
<td>M√©langer <code>pip install</code> et <code>conda install</code> sans ordre</td>
<td>Toujours <code>conda</code> en premier, <code>pip</code> ensuite si n√©cessaire</td>
</tr>
</tbody>
</table>
<p><strong>Pourquoi ne jamais toucher √† <code>(base)</code> ?</strong> Si vous cassez l‚Äôenvironnement de base, vous cassez Conda lui-m√™me et devrez r√©installer Miniforge.</p>
<hr>
</section>
</section>
</section>
<section id="vscode---√©diteur-pour-g√©omatique" class="level2">
<h2 class="anchored" data-anchor-id="vscode---√©diteur-pour-g√©omatique">3. VSCode - √âditeur pour g√©omatique</h2>
<section id="prise-en-main-de-linterface" class="level3">
<h3 class="anchored" data-anchor-id="prise-en-main-de-linterface">3.1 Prise en main de l‚Äôinterface</h3>
<section id="t√©l√©charger-et-installer-vscode" class="level4">
<h4 class="anchored" data-anchor-id="t√©l√©charger-et-installer-vscode">T√©l√©charger et installer VSCode</h4>
<ol type="1">
<li>Visiter <a href="https://code.visualstudio.com">code.visualstudio.com</a></li>
<li>T√©l√©charger pour votre syst√®me</li>
<li>Installer avec param√®tres par d√©faut</li>
</ol>
</section>
<section id="ouvrir-un-dossier-projet" class="level4">
<h4 class="anchored" data-anchor-id="ouvrir-un-dossier-projet">Ouvrir un dossier projet</h4>
<ol type="1">
<li>Ouvrir VSCode</li>
<li><strong>File</strong> ‚Üí <strong>Open Folder</strong></li>
<li>S√©lectionner votre dossier de projet</li>
<li>Cliquer <strong>Select Folder</strong></li>
</ol>
</section>
<section id="les-panneaux-principaux" class="level4">
<h4 class="anchored" data-anchor-id="les-panneaux-principaux">Les panneaux principaux</h4>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/vscode-layout.png" class="img-fluid figure-img"></p>
<figcaption>Interface VSCode</figcaption>
</figure>
</div>
<p><em>Figure 2 : Interface VSCode en action - √Ä gauche : Explorer avec arborescence de fichiers du projet. Centre : √âditeur principal affichant du code R. Bas : Panel avec onglets (Problems, Output, Terminal) - notez l‚Äôenvironnement Conda <code>(base)</code> actif dans le terminal. Haut : Menu et barre d‚Äôonglets pour naviguer entre fichiers ouverts.</em></p>
<p><strong>Zones principales :</strong> - <strong>Sidebar gauche</strong> : Explorer, Search, Source Control, Extensions - <strong>√âditeur central</strong> : Zone de code avec coloration syntaxique - <strong>Panel inf√©rieur</strong> : Terminal, Problems, Output, Debug Console - <strong>Status Bar</strong> (bas) : Informations sur le fichier, Git, et interpr√©teur Python</p>
</section>
<section id="les-sections-du-sidebar" class="level4">
<h4 class="anchored" data-anchor-id="les-sections-du-sidebar">Les sections du Sidebar</h4>
<p>Cliquer l‚Äôic√¥ne pour naviguer :</p>
<ol type="1">
<li><strong>Explorateur</strong> (Ctrl+B) : Arborescence fichiers</li>
<li><strong>Search</strong> (Ctrl+Shift+F) : Chercher dans tous fichiers</li>
<li><strong>Source Control</strong> (Ctrl+Shift+G) : Git integration</li>
<li><strong>Run and Debug</strong> (Ctrl+Shift+D) : Debugger Python</li>
<li><strong>Extensions</strong> (Ctrl+Shift+X) : Installer packages VSCode</li>
</ol>
<hr>
</section>
</section>
<section id="extensions-essentielles" class="level3">
<h3 class="anchored" data-anchor-id="extensions-essentielles">3.2 Extensions essentielles</h3>
<section id="top-5-extensions-pour-g√©omatique" class="level4">
<h4 class="anchored" data-anchor-id="top-5-extensions-pour-g√©omatique">Top 5 extensions pour g√©omatique</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 26%">
<col style="width: 44%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th>Extension</th>
<th>Utilit√©</th>
<th>Installer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Python</strong></td>
<td>Support complet Python (Microsoft)</td>
<td>Obligatoire</td>
</tr>
<tr class="even">
<td><strong>Jupyter</strong></td>
<td>Notebooks interactifs</td>
<td>Fortement recommand√©</td>
</tr>
<tr class="odd">
<td><strong>Pylance</strong></td>
<td>Autocompl√©tion avanc√©e</td>
<td>Recommand√©</td>
</tr>
<tr class="even">
<td><strong>GitLens</strong></td>
<td>Git visualization am√©lior√©e</td>
<td>Recommand√©</td>
</tr>
<tr class="odd">
<td><strong>Data Wrangler</strong></td>
<td>Exploration visuelle pandas</td>
<td>Recommand√©</td>
</tr>
</tbody>
</table>
</section>
<section id="installer-une-extension" class="level4">
<h4 class="anchored" data-anchor-id="installer-une-extension">Installer une extension</h4>
<ol type="1">
<li>Ouvrir <strong>Extensions</strong> (Ctrl+Shift+X)</li>
<li>Chercher ‚ÄúPython‚Äù (par Microsoft)</li>
<li>Cliquer <strong>Install</strong></li>
<li>Attendre installation et <strong>Reload</strong></li>
</ol>
</section>
<section id="configuration-post-installation" class="level4">
<h4 class="anchored" data-anchor-id="configuration-post-installation">Configuration post-installation</h4>
<p>Apr√®s installer l‚Äôextension Python :</p>
<ol type="1">
<li><p>Ouvrir <strong>Command Palette</strong> (Ctrl+Shift+P)</p></li>
<li><p>Taper ‚ÄúPython: Select Interpreter‚Äù</p></li>
<li><p>Choisir votre <code>geo-env</code> :</p>
<pre><code>./env/Scripts/python.exe (geo-env)</code></pre></li>
</ol>
<p>V√©rifier avec Python :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Succ√®s !"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
</section>
</section>
<section id="terminal-int√©gr√©-et-conda" class="level3">
<h3 class="anchored" data-anchor-id="terminal-int√©gr√©-et-conda">3.3 Terminal int√©gr√© et Conda</h3>
<section id="ouvrir-le-terminal-int√©gr√©" class="level4">
<h4 class="anchored" data-anchor-id="ouvrir-le-terminal-int√©gr√©">Ouvrir le terminal int√©gr√©</h4>
<pre><code>Ctrl + `  (backtick)</code></pre>
<p>ou <strong>Terminal</strong> ‚Üí <strong>New Terminal</strong></p>
</section>
<section id="v√©rifier-que-conda-est-actif" class="level4">
<h4 class="anchored" data-anchor-id="v√©rifier-que-conda-est-actif">V√©rifier que Conda est actif</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> <span class="at">--version</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="activer-votre-environnement" class="level4">
<h4 class="anchored" data-anchor-id="activer-votre-environnement">Activer votre environnement</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate geo-env</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Vous verrez :</p>
<pre><code>(geo-env) C:\Users\YourName\project &gt;</code></pre>
</section>
<section id="lancer-python-interactif" class="level4">
<h4 class="anchored" data-anchor-id="lancer-python-interactif">Lancer Python interactif</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">import</span> rasterio</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="bu">print</span>(<span class="st">"Pr√™t pour la g√©omatique."</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>Pr√™t pour la g√©omatique.</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Quitter avec <code>exit()</code> ou Ctrl+D.</p>
</section>
<section id="lancer-un-jupyter-notebook" class="level4">
<h4 class="anchored" data-anchor-id="lancer-un-jupyter-notebook">Lancer un Jupyter Notebook</h4>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">jupyter</span> notebook</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Ou dans VSCode directement : 1. Cr√©er fichier <code>analyse.ipynb</code> 2. Cliquer <strong>Select Kernel</strong> 3. Choisir <code>geo-env</code> 4. Commencer √† coder !</p>
<p><strong>Validation rapide</strong> : Pour tester votre environnement, ouvrez le notebook <a href="../exemples/01a-validation-rapide.ipynb">01a-validation-rapide.ipynb</a> (2-3 minutes). Pour un exemple avanc√© avec donn√©es Sentinel-2 r√©elles, consultez <a href="../exemples/01b-exemple-sentinel2-avance.ipynb">01b-exemple-sentinel2-avance.ipynb</a> (10-15 minutes).</p>
<hr>
</section>
</section>
<section id="git-et-github-tra√ßabilit√©-et-reproductibilit√©-scientifique" class="level3">
<h3 class="anchored" data-anchor-id="git-et-github-tra√ßabilit√©-et-reproductibilit√©-scientifique">3.4 Git et GitHub : Tra√ßabilit√© et reproductibilit√© scientifique</h3>
<section id="pourquoi-git-est-indispensable-pour-la-science-des-donn√©es" class="level4">
<h4 class="anchored" data-anchor-id="pourquoi-git-est-indispensable-pour-la-science-des-donn√©es">Pourquoi Git est indispensable pour la science des donn√©es</h4>
<p>Vous avez termin√© un projet de classification d‚Äôimages satellites il y a trois mois. Aujourd‚Äôhui, votre directeur vous demande : ‚ÄúPouvez-vous refaire cette analyse avec les donn√©es mises √† jour de d√©cembre ?‚Äù</p>
<p>Vous trouvez votre code, mais vous n‚Äô√™tes plus certain : - Quel √©tait votre environment.yml exact ? (librairies et versions) - Avez-vous modifi√© l‚Äôalgorithme apr√®s la publication ? (quelle version final ?) - Qui a fait quel changement au code ? (tra√ßabilit√©) - Pouvez-vous revenir √† une version ant√©rieure rapidement ?</p>
<p><strong>Git r√©sout tous ces probl√®mes.</strong> C‚Äôest un <strong>syst√®me de contr√¥le des versions</strong> qui enregistre chaque changement apport√© √† votre code, avec qui a fait le changement, quand, et pourquoi.</p>
</section>
<section id="git-vs-github-quelle-diff√©rence" class="level4">
<h4 class="anchored" data-anchor-id="git-vs-github-quelle-diff√©rence">Git vs GitHub : Quelle diff√©rence ?</h4>
<p><strong>Git</strong> et <strong>GitHub</strong> sont deux outils distincts qui travaillent ensemble :</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 21%">
<col style="width: 21%">
<col style="width: 32%">
</colgroup>
<thead>
<tr class="header">
<th>Outil</th>
<th>Type</th>
<th>R√¥le</th>
<th>Exemple</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Git</strong></td>
<td>Logiciel local</td>
<td>Syst√®me de contr√¥le de versions install√© sur votre ordinateur</td>
<td>Enregistre l‚Äôhistorique de vos fichiers localement</td>
</tr>
<tr class="even">
<td><strong>GitHub</strong></td>
<td>Plateforme web</td>
<td>Service cloud pour h√©berger et partager vos d√©p√¥ts Git</td>
<td>Sauvegarde votre code en ligne et permet la collaboration</td>
</tr>
</tbody>
</table>
<p><strong>Analogie simple :</strong> - <strong>Git</strong> = votre journal personnel (vous √©crivez localement) - <strong>GitHub</strong> = votre blogue public (vous publiez en ligne pour que d‚Äôautres le lisent)</p>
<p><strong>En pratique :</strong> 1. Vous utilisez <strong>Git</strong> pour versionner votre code localement (<code>git commit</code>) 2. Vous utilisez <strong>GitHub</strong> pour sauvegarder/partager votre code en ligne (<code>git push</code>) 3. Vos collaborateurs utilisent <strong>GitHub</strong> pour t√©l√©charger votre code (<code>git clone</code>)</p>
<p><strong>Vous pouvez utiliser Git sans GitHub</strong> (versioning local seulement), mais GitHub n√©cessite Git pour fonctionner.</p>
</section>
<section id="au-del√†-de-la-tra√ßabilit√©-collaboration-et-reproductibilit√©" class="level4">
<h4 class="anchored" data-anchor-id="au-del√†-de-la-tra√ßabilit√©-collaboration-et-reproductibilit√©">Au-del√† de la tra√ßabilit√© : collaboration et reproductibilit√©</h4>
<p><strong>Collaboration</strong> : Vous travaillez avec deux coll√®gues sur le m√™me projet. Sans Git : - Vous envoyez <code>analyse_v1.py</code> par email - Coll√®gue A le modifie ‚Üí <code>analyse_v1_aaa.py</code> - Coll√®gue B le modifie aussi ‚Üí <code>analyse_v1_bbb.py</code> - Vous recevez deux versions diff√©rentes‚Ä¶ comment les fusionner ?</p>
<p>Avec Git, vous travaillez sur la m√™me branche (version) du code. Les changements se fusionnent automatiquement ou demandent r√©vision (Pull Request).</p>
<p><strong>Reproductibilit√©</strong> : Un chercheur externe lit votre publication et veut reproduire vos r√©sultats. Git + environment.yml garantit qu‚Äôil peut recr√©er EXACTEMENT votre environnement et ex√©cuter EXACTEMENT le code que vous aviez.</p>
</section>
<section id="installer-git" class="level4">
<h4 class="anchored" data-anchor-id="installer-git">Installer Git</h4>
<p>Avant d‚Äôutiliser Git, vous devez d‚Äôabord l‚Äôinstaller sur votre ordinateur.</p>
<p><strong>V√©rifier si Git est d√©j√† install√© :</strong></p>
<p>Ouvrir un terminal et taper :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> <span class="at">--version</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>R√©sultat attendu :</strong> - ‚úÖ Si install√© : <code>git version 2.x.x</code> - ‚ùå Si pas install√© : <code>'git' n'est pas reconnu en tant que commande...</code></p>
<p><strong>Installation de Git (si n√©cessaire) :</strong></p>
<ol type="1">
<li>Visiter <a href="https://git-scm.com/downloads">git-scm.com/downloads</a></li>
<li>T√©l√©charger l‚Äôinstallateur pour Windows</li>
<li>Ex√©cuter l‚Äôinstallateur avec les options par d√©faut</li>
<li><strong>Important</strong> : Lors de l‚Äôinstallation, cocher ‚ÄúGit Bash‚Äù et ‚ÄúGit from the command line‚Äù</li>
<li>Red√©marrer VSCode apr√®s l‚Äôinstallation</li>
<li>V√©rifier l‚Äôinstallation : <code>git --version</code></li>
</ol>
<p><strong>Note</strong> : Si vous avez install√© GitHub Desktop, Git est d√©j√† inclus automatiquement.</p>
</section>
<section id="initialiser-git-dans-votre-projet" class="level4">
<h4 class="anchored" data-anchor-id="initialiser-git-dans-votre-projet">Initialiser Git dans votre projet</h4>
<p>Dans le terminal VSCode (avec <code>geo-env</code> actif) :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialiser repository Git</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> init</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Configurer votre identit√© (une seule fois)</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.name <span class="st">"Votre Nom Complet"</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config <span class="at">--global</span> user.email <span class="st">"votre.email@uqtr.ca"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Ces commandes cr√©ent un dossier <code>.git</code> cach√© qui track tous les changements.</p>
</section>
<section id="ajouter-et-committer-vos-fichiers" class="level4">
<h4 class="anchored" data-anchor-id="ajouter-et-committer-vos-fichiers">Ajouter et committer vos fichiers</h4>
<p><strong>Via interface VSCode</strong> (recommand√© pour d√©buter) :</p>
<ol type="1">
<li>Ouvrir <strong>Source Control</strong> (Ctrl+Shift+G)</li>
<li>VSCode affiche les fichiers modifi√©s (rouge = nouveau, bleu = modifi√©)</li>
<li>Cliquer <strong>+</strong> √† c√¥t√© chaque fichier pour les ‚Äústage‚Äù (pr√©parer pour commit)</li>
<li>Entrer un <strong>message de commit</strong> explicite (ex: ‚ÄúAjouter analyse NDVI avec calcul de statistiques‚Äù)</li>
<li>Cliquer le bouton de commit pour cr√©er le commit</li>
</ol>
<p><strong>Via terminal</strong> (plus contr√¥le) :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Voir √©tat du repo</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajouter tous les fichiers modifi√©s</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Cr√©er un commit avec message explicite</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Ajouter analyse NDVI avec calcul de statistiques"</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Voir historique des commits</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--oneline</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="messages-de-commit-clairs-une-bonne-pratique" class="level4">
<h4 class="anchored" data-anchor-id="messages-de-commit-clairs-une-bonne-pratique">Messages de commit clairs : une bonne pratique</h4>
<p>Un bon message de commit explique le <strong>POURQUOI</strong>, pas le quoi :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mauvais</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"modif"</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"fix bug"</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Bon</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Impl√©menter calcul NDVI pour images Sentinel-2"</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Corriger reprojection WGS84 (issue #12)"</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Ajouter visualisation Folium pour r√©sultats cartographiques"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="connecter-votre-repo-local-√†-github-sauvegarde-collaboration" class="level4">
<h4 class="anchored" data-anchor-id="connecter-votre-repo-local-√†-github-sauvegarde-collaboration">Connecter votre repo local √† GitHub (sauvegarde + collaboration)</h4>
<p>Jusqu‚Äô√† pr√©sent, votre repo existe seulement sur votre ordinateur. GitHub permet de : - <strong>Sauvegarder</strong> sur le cloud (pas de perte si le disque dur crash) - <strong>Partager</strong> avec coll√®gues - <strong>Collaborer</strong> via Pull Requests</p>
<p><strong>√âtape 1</strong> : Cr√©er repository sur GitHub</p>
<ol type="1">
<li>Aller sur <a href="https://github.com/new">github.com/new</a></li>
<li>Remplir :
<ul>
<li>Repository name : <code>mon-projet-geo</code></li>
<li>Description : ‚ÄúAnalyse d‚Äôimages satellites Sentinel-2 pour cartographie de zones prot√©g√©es‚Äù</li>
<li>Visibility : <strong>Public</strong> (bon pour science reproductible) ou <strong>Private</strong> (pour donn√©es sensibles)</li>
</ul></li>
<li>Ne pas cocher ‚ÄúInitialize with README‚Äù (vous en avez d√©j√† un)</li>
<li>Cr√©er repository</li>
</ol>
<p><strong>√âtape 2</strong> : Connecter votre repo local √† GitHub</p>
<p>GitHub vous affichera les commandes. Copiez-les dans VSCode terminal :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajouter GitHub comme "remote"</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote add origin https://github.com/votrecompte/mon-projet-geo.git</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Renommer branche par d√©faut en "main"</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Pousser votre code vers GitHub</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Votre code est maintenant sauvegard√© et visible sur GitHub.</p>
</section>
<section id="s√©quence-git-r√©sum√©e" class="level4">
<h4 class="anchored" data-anchor-id="s√©quence-git-r√©sum√©e">S√©quence Git r√©sum√©e</h4>
<pre><code>Code modifi√© ‚Üí git add . ‚Üí git commit -m "message" ‚Üí git push
                                                        ‚Üë
                                          (envoie sur GitHub)</code></pre>
<hr>
</section>
</section>
<section id="d√©marche-compl√®te-int√©gration-des-trois-couches" class="level3">
<h3 class="anchored" data-anchor-id="d√©marche-compl√®te-int√©gration-des-trois-couches">3.5 D√©marche compl√®te : int√©gration des trois couches</h3>
<section id="pourquoi-cette-s√©quence-de-trois-outils" class="level4">
<h4 class="anchored" data-anchor-id="pourquoi-cette-s√©quence-de-trois-outils">Pourquoi cette s√©quence de trois outils ?</h4>
<p>Jusqu‚Äô√† pr√©sent, nous avons explor√© trois briques fondamentales en isolation : - <strong>Conda</strong> : isoler l‚Äôenvironnement et geler les versions - <strong>VSCode</strong> : √©crire et tester le code - <strong>Git/GitHub</strong> : tracer les changements et collaborer</p>
<p>Or, ces trois outils fonctionnent mieux <strong>ensemble</strong> qu‚Äôen silos. Voici pourquoi :</p>
<p>Imaginez que vous terminez une analyse d‚Äôindice de v√©g√©tation (NDVI) en mai 2025 en utilisant : - <code>environment.yml</code> avec GDAL 3.8.0, Rasterio 1.3.5, NumPy 1.26.0 - Script Python <code>analyse_ndvi.py</code> que vous avez it√©r√© 15 fois - Un coll√®gue qui clone votre repo en octobre 2025</p>
<p><strong>Sans Git + environment.yml</strong> : Votre coll√®gue clone le code, mais : - Quel √©tait l‚Äôenvironnement exact ? (quelles versions ?) - Qui a modifi√© quoi et pourquoi ? (git log montre un historique vide) - Le code fonctionne diff√©remment en octobre vs mai (GDAL a chang√©)</p>
<p><strong>Avec Git + environment.yml + VSCode</strong> : Votre coll√®gue : - Voit <code>environment.yml</code> et reproduit exactement votre environnement (<code>conda env create -f environment.yml</code>) - Voit <code>git log</code> et understand chaque √©tape : ‚ÄúSept 12: Corriger extraction bandes -&gt; Oct 5: Ajouter masquage nuages‚Äù - Le code fonctionne √† l‚Äôidentique en octobre car les librairies sont gel√©es - VSCode d√©tecte automatiquement l‚Äôenvironnement correct gr√¢ce aux configuration Conda int√©gr√©es</p>
<p>Cet exemple montre un <strong>triple b√©n√©fice</strong> qui √©merge seulement en combinaison.</p>
<hr>
</section>
<section id="sc√©nario-r√©aliste-de-z√©ro-√†-livrable-publiable" class="level4">
<h4 class="anchored" data-anchor-id="sc√©nario-r√©aliste-de-z√©ro-√†-livrable-publiable">Sc√©nario r√©aliste : de z√©ro √† livrable publiable</h4>
<p>Vous d√©marrez un <strong>nouveau projet de cartographie NDVI</strong> fin septembre 2025 sur une r√©gion test. Voici la d√©marche compl√®te de ce projet (estim√© 45 minutes).</p>
<section id="√©tape-1-pr√©parer-lenvironnement-isol√©-conda" class="level5">
<h5 class="anchored" data-anchor-id="√©tape-1-pr√©parer-lenvironnement-isol√©-conda"><strong>√âtape 1 : Pr√©parer l‚Äôenvironnement isol√© (Conda)</strong></h5>
<p>Vous cr√©ez un dossier projet avec structure claire :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Terminal Windows ou PowerShell</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> D:<span class="dt">\P</span>rojets<span class="dt">\n</span>dvi-region-test</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> D:<span class="dt">\P</span>rojets<span class="dt">\n</span>dvi-region-test</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Structure minimale</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> donnees scripts resultats</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Cr√©er l‚Äôenvironnement Conda sp√©cifique au projet :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> create <span class="at">-n</span> ndvi-project python=3.11 <span class="at">-y</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate ndvi-project</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Vous devriez voir <code>(ndvi-project)</code> au d√©but de votre invite.</p>
<p>Installer les librairies g√©ospatiales depuis conda-forge :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge geopandas rasterio gdal numpy pandas scipy jupyter <span class="at">-y</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Rappel</strong> : Avec Miniforge, le <code>-c conda-forge</code> est optionnel (voir section 2.4). Nous le gardons ici pour clart√©.</p>
<p><strong>Point de validation</strong> : Toutes les librairies s‚Äôinstallent sans erreur. Vous voyez <code>Preparing transaction: done</code>.</p>
<p>Geler l‚Äôenvironnement pour reproductibilit√© :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env export <span class="op">&gt;</span> environment.yml</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Ceci cr√©e un fichier <code>environment.yml</code> qui capture <strong>exactement</strong> les versions. Ce fichier sera sauvegard√© sur GitHub.</p>
<hr>
</section>
<section id="√©tape-2-ouvrir-le-projet-dans-vscode" class="level5">
<h5 class="anchored" data-anchor-id="√©tape-2-ouvrir-le-projet-dans-vscode"><strong>√âtape 2 : Ouvrir le projet dans VSCode</strong></h5>
<p>Depuis le terminal activ√©, lancez VSCode :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Toujours dans le dossier ndvi-region-test avec (ndvi-project) actif</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">code</span> .</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>VSCode ouvre et scanne le dossier. Configurez l‚Äôinterpr√®te Python :</p>
<ol type="1">
<li><strong>Ctrl+Shift+P</strong> ‚Üí <code>Python: Select Interpreter</code></li>
<li>Choisir <code>./miniforge3/envs/ndvi-project/python.exe</code> (la version Conda que vous venez de cr√©er)</li>
</ol>
<p><strong>Point de validation</strong> : En bas √† droite, vous voyez <code>3.11.x ('ndvi-project')</code> au lieu de Python global.</p>
<p>Ouvrir le terminal int√©gr√© VSCode : <strong>Ctrl+`</strong></p>
<p>Vous voyez :</p>
<pre><code>(ndvi-project) D:\Projets\ndvi-region-test&gt;</code></pre>
<p>Cette activaation automatique du terminal Conda montre que VSCode d√©tecte l‚Äôenvironnement.</p>
<hr>
</section>
<section id="√©tape-3-cr√©er-et-tester-le-script-danalyse-vscode" class="level5">
<h5 class="anchored" data-anchor-id="√©tape-3-cr√©er-et-tester-le-script-danalyse-vscode"><strong>√âtape 3 : Cr√©er et tester le script d‚Äôanalyse (VSCode)</strong></h5>
<p>Cr√©er un fichier <code>scripts/analyse_ndvi.py</code> dans l‚Äôexplorateur VSCode.</p>
<p>Copier ce code d‚Äôanalyse complet :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co">Analyse NDVI pour r√©gion test</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co">Charge un raster NDVI et calcule statistiques + couverture</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co">"""</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.transform <span class="im">import</span> from_bounds</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Configuration chemins</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>data_dir <span class="op">=</span> Path(<span class="st">"donnees"</span>)</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>output_dir <span class="op">=</span> Path(<span class="st">"resultats"</span>)</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Cr√©er dossiers s'ils n'existent pas</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>data_dir.mkdir(exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>output_dir.mkdir(exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Fichier exemple</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>ndvi_file <span class="op">=</span> data_dir <span class="op">/</span> <span class="st">"ndvi_test.tif"</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Cr√©er raster fictif pour d√©mo (remplacer par vraies donn√©es)</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">not</span> ndvi_file.exists():</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Fichier ndvi_test.tif non trouv√©. Cr√©ons un raster de d√©mo..."</span>)</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Donn√©es NDVI fictives</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>    ndvi_data <span class="op">=</span> np.random.uniform(<span class="op">-</span><span class="fl">0.3</span>, <span class="fl">0.8</span>, size<span class="op">=</span>(<span class="dv">512</span>, <span class="dv">512</span>)).astype(np.float32)</span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># M√©tadonn√©es exemple (r√©gion Montr√©al)</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>    bounds <span class="op">=</span> (<span class="op">-</span><span class="fl">73.5</span>, <span class="fl">45.0</span>, <span class="op">-</span><span class="fl">72.5</span>, <span class="fl">46.0</span>)</span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>    transform <span class="op">=</span> from_bounds(<span class="op">*</span>bounds, <span class="dv">512</span>, <span class="dv">512</span>)</span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># √âcrire raster</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> rasterio.<span class="bu">open</span>(</span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>        ndvi_file, <span class="st">'w'</span>,</span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>        driver<span class="op">=</span><span class="st">'GTiff'</span>,</span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>        height<span class="op">=</span><span class="dv">512</span>, width<span class="op">=</span><span class="dv">512</span>,</span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>        count<span class="op">=</span><span class="dv">1</span>, dtype<span class="op">=</span>ndvi_data.dtype,</span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a>        crs<span class="op">=</span><span class="st">'EPSG:4326'</span>,</span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>        transform<span class="op">=</span>transform</span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>    ) <span class="im">as</span> dst:</span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>        dst.write(ndvi_data, <span class="dv">1</span>)</span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Raster cr√©√©: </span><span class="sc">{</span>ndvi_file<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Charger et analyser</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">=== ANALYSE NDVI R√âGION TEST ==="</span>)</span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span>)</span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(ndvi_file) <span class="im">as</span> src:</span>
<span id="cb44-51"><a href="#cb44-51" aria-hidden="true" tabindex="-1"></a>    ndvi <span class="op">=</span> src.read(<span class="dv">1</span>)</span>
<span id="cb44-52"><a href="#cb44-52" aria-hidden="true" tabindex="-1"></a>    profile <span class="op">=</span> src.profile</span>
<span id="cb44-53"><a href="#cb44-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-54"><a href="#cb44-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Statistiques de base</span></span>
<span id="cb44-55"><a href="#cb44-55" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">STATISTIQUES"</span>)</span>
<span id="cb44-56"><a href="#cb44-56" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Dimensions: </span><span class="sc">{</span>ndvi<span class="sc">.</span>shape[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> √ó </span><span class="sc">{</span>ndvi<span class="sc">.</span>shape[<span class="dv">1</span>]<span class="sc">}</span><span class="ss"> pixels"</span>)</span>
<span id="cb44-57"><a href="#cb44-57" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Min NDVI: </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb44-58"><a href="#cb44-58" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Max NDVI: </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb44-59"><a href="#cb44-59" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Moyenne NDVI: </span><span class="sc">{</span>ndvi<span class="sc">.</span>mean()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb44-60"><a href="#cb44-60" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  √âcart-type: </span><span class="sc">{</span>ndvi<span class="sc">.</span>std()<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb44-61"><a href="#cb44-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-62"><a href="#cb44-62" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Classification couverture</span></span>
<span id="cb44-63"><a href="#cb44-63" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">CLASSIFICATION COUVERTURE"</span>)</span>
<span id="cb44-64"><a href="#cb44-64" aria-hidden="true" tabindex="-1"></a>    eau <span class="op">=</span> np.<span class="bu">sum</span>(ndvi <span class="op">&lt;</span> <span class="op">-</span><span class="fl">0.1</span>)</span>
<span id="cb44-65"><a href="#cb44-65" aria-hidden="true" tabindex="-1"></a>    sol <span class="op">=</span> np.<span class="bu">sum</span>((ndvi <span class="op">&gt;=</span> <span class="op">-</span><span class="fl">0.1</span>) <span class="op">&amp;</span> (ndvi <span class="op">&lt;</span> <span class="fl">0.2</span>))</span>
<span id="cb44-66"><a href="#cb44-66" aria-hidden="true" tabindex="-1"></a>    vegetation <span class="op">=</span> np.<span class="bu">sum</span>(ndvi <span class="op">&gt;=</span> <span class="fl">0.2</span>)</span>
<span id="cb44-67"><a href="#cb44-67" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> ndvi.size</span>
<span id="cb44-68"><a href="#cb44-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-69"><a href="#cb44-69" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Eau: </span><span class="sc">{</span>eau<span class="sc">:,}</span><span class="ss"> pixels (</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>eau<span class="op">/</span>total<span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb44-70"><a href="#cb44-70" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  Sol nu: </span><span class="sc">{</span>sol<span class="sc">:,}</span><span class="ss"> pixels (</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>sol<span class="op">/</span>total<span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb44-71"><a href="#cb44-71" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"  V√©g√©tation: </span><span class="sc">{</span>vegetation<span class="sc">:,}</span><span class="ss"> pixels (</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>vegetation<span class="op">/</span>total<span class="sc">:.1f}</span><span class="ss">%)"</span>)</span>
<span id="cb44-72"><a href="#cb44-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-73"><a href="#cb44-73" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sauvegarder rapport</span></span>
<span id="cb44-74"><a href="#cb44-74" aria-hidden="true" tabindex="-1"></a>    report_file <span class="op">=</span> output_dir <span class="op">/</span> <span class="st">"rapport_ndvi.txt"</span></span>
<span id="cb44-75"><a href="#cb44-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(report_file, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb44-76"><a href="#cb44-76" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="st">"RAPPORT ANALYSE NDVI - R√âGION TEST</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb44-77"><a href="#cb44-77" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="st">"="</span> <span class="op">*</span> <span class="dv">50</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\n\n</span><span class="st">"</span>)</span>
<span id="cb44-78"><a href="#cb44-78" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"Date analyse: 2025-09-30</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-79"><a href="#cb44-79" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"Fichier source: </span><span class="sc">{</span>ndvi_file<span class="sc">}</span><span class="ch">\n\n</span><span class="ss">"</span>)</span>
<span id="cb44-80"><a href="#cb44-80" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"STATISTIQUES</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-81"><a href="#cb44-81" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"  Min: </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-82"><a href="#cb44-82" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"  Max: </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.4f}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-83"><a href="#cb44-83" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"  Moyenne: </span><span class="sc">{</span>ndvi<span class="sc">.</span>mean()<span class="sc">:.4f}</span><span class="ch">\n\n</span><span class="ss">"</span>)</span>
<span id="cb44-84"><a href="#cb44-84" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"COUVERTURE</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-85"><a href="#cb44-85" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"  Eau: </span><span class="sc">{</span>eau<span class="sc">:,}</span><span class="ss"> (</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>eau<span class="op">/</span>total<span class="sc">:.1f}</span><span class="ss">%)</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-86"><a href="#cb44-86" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"  Sol: </span><span class="sc">{</span>sol<span class="sc">:,}</span><span class="ss"> (</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>sol<span class="op">/</span>total<span class="sc">:.1f}</span><span class="ss">%)</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-87"><a href="#cb44-87" aria-hidden="true" tabindex="-1"></a>        f.write(<span class="ss">f"  V√©g√©tation: </span><span class="sc">{</span>vegetation<span class="sc">:,}</span><span class="ss"> (</span><span class="sc">{</span><span class="dv">100</span><span class="op">*</span>vegetation<span class="op">/</span>total<span class="sc">:.1f}</span><span class="ss">%)</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb44-88"><a href="#cb44-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-89"><a href="#cb44-89" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\n</span><span class="ss">Rapport sauvegard√©: </span><span class="sc">{</span>report_file<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb44-90"><a href="#cb44-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-91"><a href="#cb44-91" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Analyse termin√©e !"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Ex√©cuter le script : <strong>F5</strong> ou Terminal <code>python scripts/analyse_ndvi.py</code></p>
<p><strong>Point de validation</strong> : Vous voyez en output :</p>
<pre><code>=== ANALYSE NDVI R√âGION TEST ===
==================================================

STATISTIQUES
  Dimensions: 512 √ó 512 pixels
  Min NDVI: -0.2987
  Max NDVI: 0.7945
  Moyenne NDVI: 0.2345
  √âcart-type: 0.3821

CLASSIFICATION COUVERTURE
  Eau: 45,123 pixels (17.2%)
  Sol nu: 89,456 pixels (34.1%)
  V√©g√©tation: 156,789 pixels (59.7%)

Rapport sauvegard√©: resultats/rapport_ndvi.txt

Analyse termin√©e !</code></pre>
<p>Cet output montre que : - Rasterio fonctionne (lit/√©crit GeoTIFF) - NumPy fonctionne (calculs vectoris√©s) - Pathlib fonctionne (gestion chemins cross-platform) - Votre environnement Conda est correct</p>
<hr>
</section>
<section id="√©tape-4-explorer-et-visualiser-vscode-jupyter" class="level5">
<h5 class="anchored" data-anchor-id="√©tape-4-explorer-et-visualiser-vscode-jupyter"><strong>√âtape 4 : Explorer et visualiser (VSCode + Jupyter)</strong></h5>
<p>Cr√©er un notebook <code>exploration.ipynb</code> dans le dossier racine (VSCode d√©tecte l‚Äôextension <code>.ipynb</code> et active Jupyter).</p>
<p>Cellule 1 (import et chargement) :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>ndvi_file <span class="op">=</span> Path(<span class="st">"donnees/ndvi_test.tif"</span>)</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> rasterio.<span class="bu">open</span>(ndvi_file) <span class="im">as</span> src:</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    ndvi <span class="op">=</span> src.read(<span class="dv">1</span>)</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    bounds <span class="op">=</span> src.bounds</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"NDVI shape: </span><span class="sc">{</span>ndvi<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Valeurs: [</span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">min</span>()<span class="sc">:.2f}</span><span class="ss">, </span><span class="sc">{</span>ndvi<span class="sc">.</span><span class="bu">max</span>()<span class="sc">:.2f}</span><span class="ss">]"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Cellule 2 (visualiser distribution) :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">5</span>))</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>plt.hist(ndvi.flatten(), bins<span class="op">=</span><span class="dv">50</span>, edgecolor<span class="op">=</span><span class="st">'black'</span>, color<span class="op">=</span><span class="st">'steelblue'</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Valeur NDVI"</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Fr√©quence (pixels)"</span>)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Distribution NDVI - R√©gion test"</span>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>, alpha<span class="op">=</span><span class="fl">0.3</span>)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Cellule 3 (visualiser carte) :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">8</span>))</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>im <span class="op">=</span> ax.imshow(ndvi, cmap<span class="op">=</span><span class="st">'RdYlGn'</span>, vmin<span class="op">=-</span><span class="fl">0.3</span>, vmax<span class="op">=</span><span class="fl">0.8</span>, extent<span class="op">=</span>[bounds.left, bounds.right, bounds.bottom, bounds.top])</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>cbar <span class="op">=</span> plt.colorbar(im, ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">'NDVI'</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Carte NDVI - R√©gion test (Mercator)"</span>, fontsize<span class="op">=</span><span class="dv">14</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Longitude"</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Latitude"</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Ex√©cuter chaque cellule avec <strong>Shift+Enter</strong>.</p>
<p><strong>Point de validation</strong> : - Cellule 1 affiche dimensions (512, 512) et gamme NDVI - Cellule 2 montre histogramme avec distribution normale - Cellule 3 montre carte color√©e avec d√©grad√©s rouge (eau/sol) ‚Üí vert (v√©g√©tation)</p>
<p>Le notebook d√©montre que l‚Äôexploration interactive fonctionne. Vous avez maintenant : - Script reproductible (<code>analyse_ndvi.py</code>) - Exploration interactive (<code>exploration.ipynb</code>) - Rapport sauvegard√© (<code>resultats/rapport_ndvi.txt</code>)</p>
<hr>
</section>
<section id="√©tape-5-tracer-les-changements-git" class="level5">
<h5 class="anchored" data-anchor-id="√©tape-5-tracer-les-changements-git"><strong>√âtape 5 : Tracer les changements (Git)</strong></h5>
<p>√Ä ce stade, vous avez des fichiers √† sauvegarder et tracer.</p>
<p>Initialiser Git <strong>une fois par projet</strong> :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb49"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> init</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config user.name <span class="st">"Votre Nom"</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> config user.email <span class="st">"votre.email@uqtr.ca"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Cr√©er <code>.gitignore</code> pour exclure fichiers inutiles (cr√©er √† la racine) :</p>
<pre><code># Python
__pycache__/
*.pyc
.ipynb_checkpoints/

# Donn√©es (trop volumineux)
donnees/*.tif
donnees/*.shp

# R√©sultats (reg√©n√©rables)
resultats/*.tif

# IDE
.vscode/
.idea/</code></pre>
<p>Ajouter tous les fichiers importants et committer :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb51"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add scripts/ exploration.ipynb environment.yml .gitignore README.md</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Impl√©menter analyse NDVI avec classification couverture</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="st">- Cr√©er script analyse_ndvi.py pour calcul stats et couverture v√©g√©tale</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="st">- Ajouter notebook d'exploration avec visualisations matplotlib</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="st">- Geler environment.yml pour reproductibilit√© (GDAL 3.8, Rasterio 1.3)</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="st">- Documenter structure projet dans README"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Point de validation</strong> : Vous voyez :</p>
<pre><code>4 files changed, 287 insertions(+)</code></pre>
<p>V√©rifier l‚Äôhistorique :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb53"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> log <span class="at">--oneline</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Vous devez voir votre commit :</p>
<pre><code>a3f7d8e Impl√©menter analyse NDVI avec classification couverture</code></pre>
<hr>
</section>
<section id="√©tape-6-publier-sur-github-git-github" class="level5">
<h5 class="anchored" data-anchor-id="√©tape-6-publier-sur-github-git-github"><strong>√âtape 6 : Publier sur GitHub (Git + GitHub)</strong></h5>
<p>√Ä ce point, votre projet local est trac√©. Pour collaborer ou le rendre public :</p>
<ol type="1">
<li><strong>Cr√©er repo sur GitHub</strong>
<ul>
<li>Visiter https://github.com/new</li>
<li>Nom : <code>ndvi-region-test</code></li>
<li>Description : ‚ÄúAnalyse NDVI de la r√©gion test avec classification couverture (GDAL, Rasterio)‚Äù</li>
<li>Visibilit√© : Public</li>
<li>Cr√©er repo</li>
</ul></li>
<li><strong>Connecter repo local √† GitHub</strong></li>
</ol>
<p>Copier les commandes que GitHub affiche. Dans VSCode terminal :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb55"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote add origin https://github.com/VOTRE_COMPTE/ndvi-region-test.git</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Point de validation</strong> : - GitHub affiche votre repo avec tous les fichiers - Vous voyez le commit et le message complet - <code>environment.yml</code> est visible et lisible - <code>scripts/analyse_ndvi.py</code> contient votre code avec num√©ros de ligne - Notebook <code>exploration.ipynb</code> est affich√© avec rendu des cellules</p>
<hr>
</section>
</section>
<section id="r√©sum√©-des-trois-couches-en-action" class="level4">
<h4 class="anchored" data-anchor-id="r√©sum√©-des-trois-couches-en-action">R√©sum√© des trois couches en action</h4>
<table class="caption-top table">
<colgroup>
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 24%">
<col style="width: 26%">
</colgroup>
<thead>
<tr class="header">
<th>Couche</th>
<th>Outil</th>
<th>R√¥le</th>
<th>Artefact</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Isolation</strong></td>
<td>Conda</td>
<td>Geler versions exactes pour reproductibilit√©</td>
<td><code>environment.yml</code></td>
</tr>
<tr class="even">
<td><strong>D√©veloppement</strong></td>
<td>VSCode + Jupyter</td>
<td>√âcrire, tester, explorer interactivement</td>
<td><code>scripts/*.py</code>, <code>*.ipynb</code></td>
</tr>
<tr class="odd">
<td><strong>Tra√ßabilit√©</strong></td>
<td>Git</td>
<td>Enregistrer qui/quand/pourquoi changements</td>
<td><code>git log</code> ‚Üí historique</td>
</tr>
<tr class="even">
<td><strong>Collaboration</strong></td>
<td>GitHub</td>
<td>Rendre code accessible, partager, revue</td>
<td>Repo public avec branches</td>
</tr>
</tbody>
</table>
<p><strong>L‚Äôint√©gration</strong> : Ces quatre √©l√©ments (environment.yml + VSCode + Git + GitHub) forment un <strong>syst√®me coh√©rent</strong>. Quand un coll√®gue clone votre repo :</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb56"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/VOTRE_COMPTE/ndvi-region-test.git</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ndvi-region-test</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> env create <span class="at">-f</span> environment.yml</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> activate ndvi-region-test</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="ex">code</span> .</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="co"># VSCode ouvre et d√©tecte automatiquement l'environnement</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>En moins de 2 minutes, votre coll√®gue a : - Votre code exact - Votre environnement exact - L‚Äôhistorique exact des changements - VSCode configur√© correctement</p>
<p><strong>Ceci est impossible avec seulement Conda</strong>, seulement <strong>VSCode</strong>, ou seulement <strong>Git</strong> isol√©ment. C‚Äôest la <strong>combinaison</strong> qui cr√©e la magie.</p>
<p><strong>Exemple pratique complet</strong> : Pour suivre une pratique guid√©e de bout en bout (30 minutes), consultez <a href="../exemples/02-pratique-projet-complet.md">02-pratique-projet-complet.md</a>.</p>
<hr>
</section>
</section>
</section>
<section id="ressources-et-annexes" class="level2">
<h2 class="anchored" data-anchor-id="ressources-et-annexes">4. Ressources et annexes</h2>
<section id="fichiers-ressources" class="level3">
<h3 class="anchored" data-anchor-id="fichiers-ressources">Fichiers ressources</h3>
<ul>
<li><a href="../resources/environment.yml"><strong>environment.yml</strong></a> - Librairies g√©ospatiales pr√©-configur√©es</li>
<li><a href="../resources/settings.json"><strong>settings.json</strong></a> - Configuration VSCode optimale</li>
<li><a href="../resources/extensions-recommandees.md"><strong>extensions-recommandees.md</strong></a> - Extensions d√©taill√©es</li>
</ul>
</section>
<section id="documentation-officielle" class="level3">
<h3 class="anchored" data-anchor-id="documentation-officielle">Documentation officielle</h3>
<ul>
<li><a href="https://docs.conda.io">Conda docs</a></li>
<li><a href="https://code.visualstudio.com/docs">VSCode docs</a></li>
<li><a href="https://geopandas.org">GeoPandas</a></li>
<li><a href="https://gdal.org">GDAL/OGR</a></li>
<li><a href="https://rasterio.readthedocs.io">Rasterio</a></li>
</ul>
</section>
<section id="probl√®mes-courants-et-solutions" class="level3">
<h3 class="anchored" data-anchor-id="probl√®mes-courants-et-solutions">Probl√®mes courants et solutions</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 36%">
<col style="width: 26%">
<col style="width: 36%">
</colgroup>
<thead>
<tr class="header">
<th>Probl√®me</th>
<th>Cause</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ModuleNotFoundError: No module named 'geopandas'</code></td>
<td>Mauvais environnement Python</td>
<td>V√©rifier interpr√®te VSCode ‚Üí <code>Python: Select Interpreter</code></td>
</tr>
<tr class="even">
<td><code>conda: command not found</code></td>
<td>Conda pas dans PATH</td>
<td>Relancer le shell ou terminal</td>
</tr>
<tr class="odd">
<td>GDAL installation √©choue</td>
<td>D√©pendances manquantes</td>
<td>Utiliser <code>conda-forge</code> channel</td>
</tr>
<tr class="even">
<td>VSCode ne trouve pas Jupyter</td>
<td>Extension non install√©e</td>
<td>Installer extension Jupyter officielle</td>
</tr>
</tbody>
</table>
</section>
<section id="points-cl√©s-√†-retenir" class="level3">
<h3 class="anchored" data-anchor-id="points-cl√©s-√†-retenir">Points cl√©s √† retenir</h3>
<ul>
<li><strong>Conda</strong> isole chaque projet ‚Üí pas de conflits de versions</li>
<li><strong>environment.yml</strong> rend projets <strong>reproductibles</strong></li>
<li><strong>VSCode</strong> d√©tecte automatiquement environnement Conda</li>
<li><strong>Git/GitHub</strong> permettent collaboration efficace</li>
<li><strong>Extensions</strong> VSCode augmentent productivit√©</li>
</ul>
</section>
<section id="prochaines-√©tapes" class="level3">
<h3 class="anchored" data-anchor-id="prochaines-√©tapes">Prochaines √©tapes</h3>
<ol type="1">
<li>Installer Miniforge</li>
<li>Cr√©er <code>geo-env</code> avec GeoPandas</li>
<li>Configurer VSCode</li>
<li>Faire premier commit Git</li>
<li>Pousser sur GitHub</li>
<li>Commencer votre projet g√©omatique !</li>
</ol>
<hr>
<p><strong>Formation compl√©t√©e !</strong></p>
<p>Pour questions : consultez les <a href="../resources/">ressources</a> ou la <a href="https://docs.conda.io">documentation officielle</a>.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>